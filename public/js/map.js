const getMap = () => {
    const replaceAt = (string, index, replacement) => {
        return string.substr(0, index) + replacement+ string.substr(index + replacement.length);
    }
    const strEach = (str, func) => {
        for(let i = 0; i < str.length; i++){
            func(str[i], i);
        }
    };
    const scl = 40;
    const map = [
        "########################################",
        "#,,,................................,,,#",
        "#,1,.........C............C.........,3,#",
        "#,,,................................,,,#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#............C............C............#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#............C............C............#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#......................................#",
        "#,,,................................,,,#",
        "#,4,.........C............C.........,2,#",
        "#,,,................................,,,#",
        "########################################",
    ];   
    
    map.forEach((row, i) => {
        strEach(row, (tile, j) => {
            let x = j*scl;
            let y = i*scl;
            if(tile !== "1" 
            && tile !== "2"
            && tile !== "3"
            && tile !== "4" 
            && tile !== "C"
            && tile !== ","
            && tile !== "T"){
                if(Math.random() < 0.3){
                     if(Math.random() < 0.1) map[i] = replaceAt(map[i], j, "T");
                     else map[i] = replaceAt(map[i], j, "#");
                }
                else if(Math.random() < 0.4) map[i] = replaceAt(map[i], j, "B");
            }
        });
    });
    return map;
}

module.exports = getMap;